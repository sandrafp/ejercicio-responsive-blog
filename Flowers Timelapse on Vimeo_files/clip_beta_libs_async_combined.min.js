(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}__webpack_require__(1);var _appsSearch_autocompleteAutocomplete=__webpack_require__(4);var _appsSearch_autocompleteAutocomplete2=_interopRequireDefault(_appsSearch_autocompleteAutocomplete);var initAutocompleteForSearch=function initAutocompleteForSearch(config){var searchInputs=document.querySelectorAll(".js-search_autocomplete");if(vimeo_esi.config&&vimeo_esi.config.autocomplete_enabled){vimeo.autocomplete_instances=[];for(var i=0;i<searchInputs.length;i++){var vodFlag=searchInputs[i].classList.contains("js-search_vod_autocomplete");var options=config||{vod_enabled:vodFlag};var autocomplete=new _appsSearch_autocompleteAutocomplete2["default"](searchInputs[i],options);vimeo.autocomplete_instances.push(autocomplete)}}};window.initAutocompleteForSearch=initAutocompleteForSearch;initAutocompleteForSearch()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global,setImmediate){(function UMD(name,context,definition){context[name]=context[name]||definition();if(typeof module!="undefined"&&module.exports){module.exports=context[name]}else if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function $AMD$(){return context[name]}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})("Promise",typeof global!="undefined"?global:this,function DEF(){"use strict";var builtInProp,cycle,scheduling_queue,ToString=Object.prototype.toString,timer=typeof setImmediate!="undefined"?function timer(fn){return setImmediate(fn)}:setTimeout;try{Object.defineProperty({},"x",{});builtInProp=function builtInProp(obj,name,val,config){return Object.defineProperty(obj,name,{value:val,writable:true,configurable:config!==false})}}catch(err){builtInProp=function builtInProp(obj,name,val){obj[name]=val;return obj}}scheduling_queue=function Queue(){var first,last,item;function Item(fn,self){this.fn=fn;this.self=self;this.next=void 0}return{add:function add(fn,self){item=new Item(fn,self);if(last){last.next=item}else{first=item}last=item;item=void 0},drain:function drain(){var f=first;first=last=cycle=void 0;while(f){f.fn.call(f.self);f=f.next}}}}();function schedule(fn,self){scheduling_queue.add(fn,self);if(!cycle){cycle=timer(scheduling_queue.drain)}}function isThenable(o){var _then,o_type=typeof o;if(o!=null&&(o_type=="object"||o_type=="function")){_then=o.then}return typeof _then=="function"?_then:false}function notify(){for(var i=0;i<this.chain.length;i++){notifyIsolated(this,this.state===1?this.chain[i].success:this.chain[i].failure,this.chain[i])}this.chain.length=0}function notifyIsolated(self,cb,chain){var ret,_then;try{if(cb===false){chain.reject(self.msg)}else{if(cb===true){ret=self.msg}else{ret=cb.call(void 0,self.msg)}if(ret===chain.promise){chain.reject(TypeError("Promise-chain cycle"))}else if(_then=isThenable(ret)){_then.call(ret,chain.resolve,chain.reject)}else{chain.resolve(ret)}}}catch(err){chain.reject(err)}}function resolve(msg){var _then,self=this;if(self.triggered){return}self.triggered=true;if(self.def){self=self.def}try{if(_then=isThenable(msg)){schedule(function(){var def_wrapper=new MakeDefWrapper(self);try{_then.call(msg,function $resolve$(){resolve.apply(def_wrapper,arguments)},function $reject$(){reject.apply(def_wrapper,arguments)})}catch(err){reject.call(def_wrapper,err)}})}else{self.msg=msg;self.state=1;if(self.chain.length>0){schedule(notify,self)}}}catch(err){reject.call(new MakeDefWrapper(self),err)}}function reject(msg){var self=this;if(self.triggered){return}self.triggered=true;if(self.def){self=self.def}self.msg=msg;self.state=2;if(self.chain.length>0){schedule(notify,self)}}function iteratePromises(Constructor,arr,resolver,rejecter){for(var idx=0;idx<arr.length;idx++){(function IIFE(idx){Constructor.resolve(arr[idx]).then(function $resolver$(msg){resolver(idx,msg)},rejecter)})(idx)}}function MakeDefWrapper(self){this.def=self;this.triggered=false}function MakeDef(self){this.promise=self;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function Promise(executor){if(typeof executor!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var def=new MakeDef(this);this["then"]=function then(success,failure){var o={success:typeof success=="function"?success:true,failure:typeof failure=="function"?failure:false};o.promise=new this.constructor(function extractChain(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}o.resolve=resolve;o.reject=reject});def.chain.push(o);if(def.state!==0){schedule(notify,def)}return o.promise};this["catch"]=function $catch$(failure){return this.then(void 0,failure)};try{executor.call(void 0,function publicResolve(msg){resolve.call(def,msg)},function publicReject(msg){reject.call(def,msg)})}catch(err){reject.call(def,err)}}var PromisePrototype=builtInProp({},"constructor",Promise,false);Promise.prototype=PromisePrototype;builtInProp(PromisePrototype,"__NPO__",0,false);builtInProp(Promise,"resolve",function Promise$resolve(msg){var Constructor=this;if(msg&&typeof msg=="object"&&msg.__NPO__===1){return msg}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}resolve(msg)})});builtInProp(Promise,"reject",function Promise$reject(msg){return new this(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}reject(msg)})});builtInProp(Promise,"all",function Promise$all(arr){var Constructor=this;if(ToString.call(arr)!="[object Array]"){return Constructor.reject(TypeError("Not an array"))}if(arr.length===0){return Constructor.resolve([])}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}var len=arr.length,msgs=Array(len),count=0;iteratePromises(Constructor,arr,function resolver(idx,msg){msgs[idx]=msg;if(++count===len){resolve(msgs)}},reject)})});builtInProp(Promise,"race",function Promise$race(arr){var Constructor=this;if(ToString.call(arr)!="[object Array]"){return Constructor.reject(TypeError("Not an array"))}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}iteratePromises(Constructor,arr,function resolver(idx,msg){resolve(msg)},reject)})});return Promise})}).call(exports,function(){return this}(),__webpack_require__(2).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){var nextTick=__webpack_require__(3).nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args)}else{fn.call(null)}exports.clearImmediate(id)}});return id};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(2).setImmediate,__webpack_require__(2).clearImmediate)},function(module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _componentsConstantsKeyCodes=__webpack_require__(5);var _componentsConstantsKeyCodes2=_interopRequireDefault(_componentsConstantsKeyCodes);var _appsSearch_autocompleteConstants=__webpack_require__(6);var _appsSearch_autocompleteAutocompleteApi=__webpack_require__(7);var _appsSearch_autocompleteAutocompleteApi2=_interopRequireDefault(_appsSearch_autocompleteAutocompleteApi);var _utilsDispatcherFADispatcher=__webpack_require__(8);var _utilsDispatcherFADispatcher2=_interopRequireDefault(_utilsDispatcherFADispatcher);var _utilsEventsCustomEventFactory=__webpack_require__(9);var _utilsEventsCustomEventFactory2=_interopRequireDefault(_utilsEventsCustomEventFactory);var DEFAULT_OPTIONS={autocomplete_enabled:true,suggestions_limit:5,minimum_characters:3,vod_enabled:false,async_enabled:false};var TRACKING_EVENTS={TAB:"Tab on Suggestion",ENTER:"Enter on Suggestion",CLICK:"Click on Suggestion",NO_SUGGESTION:"Search with no Suggestions",IGNORE_SUGGESTION:"Search ignoring Suggestions"};var faDispatcher=new _utilsDispatcherFADispatcher2["default"];var Autocomplete=function(){function Autocomplete(search_input){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Autocomplete);this.searchInput=search_input;if(!this.searchInput){throw new Error("Autocomplete search input does not exist in the DOM")}if(this.searchInput.tagName.toLowerCase()!=="input"||this.searchInput.getAttribute("type")!=="text"){throw new Error("Autocomplete search input needs to be an input of type text")}this.searchForm=this.closest(this.searchInput,"form");if(!this.searchForm){throw new Error("No search form ancestor element found")}this.autocompleteWrapper=document.createElement("ul");this.autocompleteWrapper.className=_appsSearch_autocompleteConstants.AUTOCOMPLETE_CLASS;this.autocompleteWrapper.style.display=_appsSearch_autocompleteConstants.NONE;this.searchForm.appendChild(this.autocompleteWrapper);this.suggestions=[];this.active_suggestion_index=null;this.force_hide_suggestions=false;this._suggestions_length=0;this._search_input_text="";this._clicking_suggestion=false;this._suggestions_changed=false;this._last_display_suggestions_time=0;this._requests_timing=[];this._requests_made=0;this._requests_cancelled=0;this._cachedSuggestions={vod:{},text:{}};this._tracked=false;this._options=DEFAULT_OPTIONS;for(var i in options){this._options[i]=options[i]}this.attachListeners()}_createClass(Autocomplete,[{key:"changeContext",value:function changeContext(config){var _this=this;Object.keys(config).forEach(function(option){var value=config[option];if(typeof value==="boolean"&&_this._options.hasOwnProperty(option)){_this._options[option]=value}})}},{key:"closest",value:function closest(element,tag){var parent=element;while(parent.tagName){if(parent.tagName.toLowerCase()===tag.toLowerCase()){return parent}else{parent=parent.parentNode}}return null}},{key:"assembleListItems",value:function assembleListItems(){for(var i=0;i<this.suggestions.length;i++){var suggestionItem=document.createElement("li");var suggestionText=document.createElement("span");var suggestionLink=document.createElement("a");suggestionLink.classList.add("autocomplete_sug_link");suggestionText.classList.add("autocomplete_sug_label");suggestionLink.setAttribute("title",this.suggestions[i].text);suggestionText.textContent=this.suggestions[i].text;suggestionItem.setAttribute("data-index",i);if(i===this.active_suggestion_index){suggestionLink.classList.add("active")}if(this.suggestions[i].type==="suggestion"){suggestionItem.classList.add("reg_suggestion")}else{var vodThumb=document.createElement("img");vodThumb.classList.add("autocomplete_sug_thumb");vodThumb.setAttribute("src",this.suggestions[i].meta.thumbnail_url);suggestionLink.appendChild(vodThumb);suggestionItem.classList.add("vod_suggestion")}suggestionLink.appendChild(suggestionText);suggestionItem.appendChild(suggestionLink);this.autocompleteWrapper.appendChild(suggestionItem)}}},{key:"updateSuggestionsDisplay",value:function updateSuggestionsDisplay(){if(this.suggestions_visible){while(this.autocompleteWrapper.hasChildNodes()){this.autocompleteWrapper.removeChild(this.autocompleteWrapper.firstChild)}this.assembleListItems();if(this.autocompleteWrapper.style.display===_appsSearch_autocompleteConstants.NONE){this.searchInput.classList.add(_appsSearch_autocompleteConstants.INPUT_HAS_AUTOCOMPLETE_CLASS);this.autocompleteWrapper.style.display=_appsSearch_autocompleteConstants.BLOCK}if(this._suggestions_changed){this._last_display_suggestions_time=this.time_now;this._suggestions_changed=false}}else{this.searchInput.classList.remove(_appsSearch_autocompleteConstants.INPUT_HAS_AUTOCOMPLETE_CLASS);this.autocompleteWrapper.style.display=_appsSearch_autocompleteConstants.NONE}}},{key:"getSuggestions",value:function getSuggestions(text){var _this2=this;var request_start_time=this.time_now;var base_path=this._options.vod_enabled?"/search/ondemand":"/search";text=text.toLowerCase();this._tracked=false;if(this._cachedSuggestions[this.cache_key][text]){this.suggestions=this._cachedSuggestions[this.cache_key][text];return}if(_appsSearch_autocompleteAutocompleteApi2["default"].pendingRequest){this._requests_cancelled++}_appsSearch_autocompleteAutocompleteApi2["default"].getSuggestions(text,base_path).then(function(xhr){var response=typeof xhr.response==="string"?JSON.parse(xhr.response):xhr.response;var cache_hit=parseInt(xhr.getResponseHeader("X-Varnish-Cache"),10)===1;_this2._suggestions_changed=true;_this2._requests_timing.push(_this2.time_now-request_start_time);_this2._requests_made++;if(response.options){_this2.suggestions=response.options;_this2.force_hide_suggestions=false;_this2._cachedSuggestions[_this2.cache_key][text]=_this2.suggestions}if(cache_hit){faDispatcher.trackEvent({component:"Autocomplete-cachehit",host:xhr.getResponseHeader("X-VServer")})}})}},{key:"populateWithSuggestion",value:function populateWithSuggestion(suggestion){this.searchInput.value=suggestion.text;this._search_input_text=suggestion.text;this.suggestions=[]}},{key:"navigateToSuggestion",value:function navigateToSuggestion(suggestion){this.populateWithSuggestion(suggestion);window.location.href=suggestion.meta.target_url}},{key:"searchWithSuggestion",value:function searchWithSuggestion(suggestion){this.populateWithSuggestion(suggestion);if(this._options.async_enabled){this.handleSubmitAsync(suggestion.text)}else{this.searchForm.submit()}this.searchForm.querySelector("input").blur();this.force_hide_suggestions=true}},{key:"handleSelectTextResult",value:function handleSelectTextResult(resultItem){this.searchWithSuggestion(resultItem)}},{key:"handleSelectVodResult",value:function handleSelectVodResult(vodResultItem){this.navigateToSuggestion(vodResultItem);this.force_hide_suggestions=true}},{key:"handleSelectResult",value:function handleSelectResult(resultItem){switch(resultItem.type){case _appsSearch_autocompleteConstants.TYPE_ONDEMAND:this.handleSelectVodResult(resultItem);break;case _appsSearch_autocompleteConstants.TYPE_TEXT:this.handleSelectTextResult(resultItem);break;default:throw new Error("Invalid result item selected")}}},{key:"navigateUp",value:function navigateUp(){if(this.active_suggestion_index!==null){if(this.active_suggestion_index>0){this.active_suggestion_index-=1}else{this.active_suggestion_index=null}}}},{key:"navigateDown",value:function navigateDown(){if(this.active_suggestion_index!==null){if(this.active_suggestion_index<this._suggestions_length-1){this.active_suggestion_index+=1}}else{this.active_suggestion_index=0}}},{key:"trackEvent",value:function trackEvent(action,suggestion_index){var requests_timing=0;if(this._requests_timing.length){requests_timing=this._requests_timing.reduce(function(a,b){return a+b})/this._requests_timing.length}faDispatcher.trackEvent({component:"Autocomplete",platform:"Desktop Web",action:action,input_value:this.searchInput.value,suggestions:this._suggestions_length?this.suggestions.clips:"",selected_suggestion:suggestion_index?this.suggestions[suggestion_index]:"",selected_suggestion_position:suggestion_index?suggestion_index+1:"",request_to_action_time:this.time_now-this._last_display_suggestions_time,requests_timing:requests_timing,requests_made:this._requests_made,requests_cancelled:this._requests_cancelled});this._tracked=true;this._requests_timing=[]}},{key:"isActionKey",value:function isActionKey(key_code){for(var key in _componentsConstantsKeyCodes2["default"]){if(_componentsConstantsKeyCodes2["default"][key]===key_code){return true}}return false}},{key:"ensureAsciiString",value:function ensureAsciiString(string){return string.replace(/[^\x00-\x7F]/g,"")}},{key:"handleFocusSearchInput",value:function handleFocusSearchInput(){this.force_hide_suggestions=false}},{key:"handleBlurSearchInput",value:function handleBlurSearchInput(){if(this._clicking_suggestion){this._clicking_suggestion=false}else{this.force_hide_suggestions=true}}},{key:"handleKeydownSearchInput",value:function handleKeydownSearchInput(e){if(!this._options.autocomplete_enabled){return}var is_action_key=this.isActionKey(e.keyCode);if(!is_action_key){return false}switch(e.keyCode){case _componentsConstantsKeyCodes2["default"].ENTER:if(this.suggestions_visible&&this.active_suggestion_index!==null){e.preventDefault();this.trackEvent(TRACKING_EVENTS.ENTER,this.active_suggestion_index);this.handleSelectResult(this.suggestions[this.active_suggestion_index])}break;case _componentsConstantsKeyCodes2["default"].TAB:if(this.suggestions_visible&&this.active_suggestion_index!==null){e.preventDefault();this.trackEvent(TRACKING_EVENTS.TAB,this.active_suggestion_index);this.populateWithSuggestion(this.suggestions[this.active_suggestion_index])}break;case _componentsConstantsKeyCodes2["default"].UP:if(this._suggestions_length){e.preventDefault();if(this.force_hide_suggestions){this.force_hide_suggestions=false}else{this.navigateUp()}}break;case _componentsConstantsKeyCodes2["default"].DOWN:if(this._suggestions_length){e.preventDefault();if(this.force_hide_suggestions){this.force_hide_suggestions=false}else{this.navigateDown()}}break;case _componentsConstantsKeyCodes2["default"].ESC:if(this.suggestions_visible){e.preventDefault();this.force_hide_suggestions=true}break}}},{key:"handleKeyupSearchInput",value:function handleKeyupSearchInput(e){if(!this._options.autocomplete_enabled){return}var is_action_key=this.isActionKey(e.keyCode);var validated_input_value=this.ensureAsciiString(e.target.value);if(!is_action_key&&validated_input_value!==this._search_input_text){this._search_input_text=validated_input_value;if(this._search_input_text.length>=this._options.minimum_characters){this.getSuggestions(this._search_input_text);this.active_suggestion_index=null;return false}this.suggestions=[]}}},{key:"handleSubmitAsync",value:function handleSubmitAsync(term){var autocompleteEvent=_utilsEventsCustomEventFactory2["default"].createEvent("submit_search_form",{term:term});dispatchEvent(autocompleteEvent)}},{key:"handleSubmitSearchForm",value:function handleSubmitSearchForm(e){_appsSearch_autocompleteAutocompleteApi2["default"].cancelRequest();if(this._options.async_enabled){e.preventDefault();var input=e.target.querySelector("input");input.blur();this.handleSubmitAsync(input.value)}if(!this._tracked){if(!this._suggestions_length){this.trackEvent(TRACKING_EVENTS.NO_SUGGESTION)}else{this.trackEvent(TRACKING_EVENTS.IGNORE_SUGGESTION)}}this.force_hide_suggestions=true}},{key:"getSuggestionIndex",value:function getSuggestionIndex(e){if(e.target.tagName.toLowerCase()==="ul"){return}var suggestionLi=this.closest(e.target,"li");return parseInt(suggestionLi.getAttribute("data-index"),10)}},{key:"handleMouseoverSuggestion",value:function handleMouseoverSuggestion(e){var suggestion_index=this.getSuggestionIndex(e);if(suggestion_index!==this.active_suggestion_index){this.active_suggestion_index=suggestion_index}}},{key:"handleMousedownSuggestion",value:function handleMousedownSuggestion(e){this._clicking_suggestion=true}},{key:"handleMouseupSuggestion",value:function handleMouseupSuggestion(e){var suggestion_index=this.getSuggestionIndex(e);this.trackEvent(TRACKING_EVENTS.CLICK,suggestion_index);this.handleSelectResult(this.suggestions[suggestion_index])}},{key:"attachListeners",value:function attachListeners(){this.searchInput.addEventListener("focus",this.handleFocusSearchInput.bind(this));this.searchInput.addEventListener("blur",this.handleBlurSearchInput.bind(this));this.searchInput.addEventListener("keydown",this.handleKeydownSearchInput.bind(this));this.searchInput.addEventListener("keyup",this.handleKeyupSearchInput.bind(this));this.searchForm.addEventListener("submit",this.handleSubmitSearchForm.bind(this));this.autocompleteWrapper.addEventListener("mouseover",this.handleMouseoverSuggestion.bind(this));this.autocompleteWrapper.addEventListener("mousedown",this.handleMousedownSuggestion.bind(this));this.autocompleteWrapper.addEventListener("mouseup",this.handleMouseupSuggestion.bind(this))}},{key:"cache_key",get:function get(){return this._options.vod_enabled?"vod":"text"}},{key:"suggestions",get:function get(){return this._suggestions},set:function set(){var suggestions=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];this._suggestions=suggestions;this._suggestions_length=suggestions.length;this.updateSuggestionsDisplay()}},{key:"active_suggestion_index",get:function get(){return this._active_suggestion_index},set:function set(val){this._active_suggestion_index=val;this.updateSuggestionsDisplay()}},{key:"force_hide_suggestions",get:function get(){return this._force_hide_suggestions},set:function set(val){this._force_hide_suggestions=val;if(val===true){this._active_suggestion_index=null}this.updateSuggestionsDisplay()}},{key:"suggestions_visible",get:function get(){return this._suggestions_length&&!this.force_hide_suggestions}},{key:"time_now",get:function get(){return(new Date).getTime()}}]);return Autocomplete}();exports["default"]=Autocomplete;module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var KEY_CODES={ENTER:13,TAB:9,UP:38,DOWN:40,ESC:27};exports["default"]=KEY_CODES;module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var AUTOCOMPLETE_CLASS="autocomplete_wrapper";exports.AUTOCOMPLETE_CLASS=AUTOCOMPLETE_CLASS;var INPUT_HAS_AUTOCOMPLETE_CLASS="has_autocomplete_suggestions";exports.INPUT_HAS_AUTOCOMPLETE_CLASS=INPUT_HAS_AUTOCOMPLETE_CLASS;var TYPE_ONDEMAND="ondemand";exports.TYPE_ONDEMAND=TYPE_ONDEMAND;var TYPE_TEXT="suggestion";exports.TYPE_TEXT=TYPE_TEXT;var BLOCK="block";exports.BLOCK=BLOCK;var NONE="none";exports.NONE=NONE},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var AutocompleteApi={pendingRequest:null,getSuggestions:function getSuggestions(text){var _this=this;var base_path=arguments.length<=1||arguments[1]===undefined?"/search":arguments[1];return new Promise(function(resolve,reject){if(_this.pendingRequest){_this.pendingRequest.abort()}var xhr=new XMLHttpRequest;var encodedText=encodeURIComponent(text);var fetchUrl=base_path+"/autocomplete?q="+encodedText;xhr.open("GET",fetchUrl);xhr.responseType="json";xhr.withCredentials=true;xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.send();xhr.addEventListener("load",function(){if(xhr.status>=200&&xhr.status<400){resolve(xhr)}else{reject(new Error("getSuggestions: "+fetchUrl+" failed with status: "+xhr.status))}_this.pendingRequest=null});xhr.addEventListener("error",function(){reject(new Error("getSuggestions: "+fetchUrl+" failed with status: "+xhr.status));_this.pendingRequest=null});_this.pendingRequest=xhr})},cancelRequest:function cancelRequest(){this.pendingRequest&&this.pendingRequest.abort()}};exports["default"]=AutocompleteApi;module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var FADispatcher=function(){function FADispatcher(){_classCallCheck(this,FADispatcher);window.__fa=window.__fa||[]}_createClass(FADispatcher,[{key:"trackEvent",value:function trackEvent(){var event_data=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return window.__fa.push(["trackEvent",event_data])}}]);return FADispatcher}();exports["default"]=FADispatcher;module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var CustomEventFactory=function(){function CustomEventFactory(){_classCallCheck(this,CustomEventFactory)}_createClass(CustomEventFactory,null,[{key:"createEvent",value:function createEvent(event_name){var data=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var new_event=undefined;if(typeof window.CustomEvent==="function"){new_event=new CustomEvent(event_name,{detail:data})}else{new_event=document.createEvent("CustomEvent");new_event.initCustomEvent(event_name,true,true,data)}return new_event}}]);return CustomEventFactory}();exports["default"]=CustomEventFactory;module.exports=exports["default"]}]);(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}__webpack_require__(1);var _componentsModalModalHandler=__webpack_require__(4);var _componentsModalModalHandler2=_interopRequireDefault(_componentsModalModalHandler);vimeo.Modal=new _componentsModalModalHandler2["default"]},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global,setImmediate){(function UMD(name,context,definition){context[name]=context[name]||definition();if(typeof module!="undefined"&&module.exports){module.exports=context[name]}else if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function $AMD$(){return context[name]}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})("Promise",typeof global!="undefined"?global:this,function DEF(){"use strict";var builtInProp,cycle,scheduling_queue,ToString=Object.prototype.toString,timer=typeof setImmediate!="undefined"?function timer(fn){return setImmediate(fn)}:setTimeout;try{Object.defineProperty({},"x",{});builtInProp=function builtInProp(obj,name,val,config){return Object.defineProperty(obj,name,{value:val,writable:true,configurable:config!==false})}}catch(err){builtInProp=function builtInProp(obj,name,val){obj[name]=val;return obj}}scheduling_queue=function Queue(){var first,last,item;function Item(fn,self){this.fn=fn;this.self=self;this.next=void 0}return{add:function add(fn,self){item=new Item(fn,self);if(last){last.next=item}else{first=item}last=item;item=void 0},drain:function drain(){var f=first;first=last=cycle=void 0;while(f){f.fn.call(f.self);f=f.next}}}}();function schedule(fn,self){scheduling_queue.add(fn,self);if(!cycle){cycle=timer(scheduling_queue.drain)}}function isThenable(o){var _then,o_type=typeof o;if(o!=null&&(o_type=="object"||o_type=="function")){
_then=o.then}return typeof _then=="function"?_then:false}function notify(){for(var i=0;i<this.chain.length;i++){notifyIsolated(this,this.state===1?this.chain[i].success:this.chain[i].failure,this.chain[i])}this.chain.length=0}function notifyIsolated(self,cb,chain){var ret,_then;try{if(cb===false){chain.reject(self.msg)}else{if(cb===true){ret=self.msg}else{ret=cb.call(void 0,self.msg)}if(ret===chain.promise){chain.reject(TypeError("Promise-chain cycle"))}else if(_then=isThenable(ret)){_then.call(ret,chain.resolve,chain.reject)}else{chain.resolve(ret)}}}catch(err){chain.reject(err)}}function resolve(msg){var _then,self=this;if(self.triggered){return}self.triggered=true;if(self.def){self=self.def}try{if(_then=isThenable(msg)){schedule(function(){var def_wrapper=new MakeDefWrapper(self);try{_then.call(msg,function $resolve$(){resolve.apply(def_wrapper,arguments)},function $reject$(){reject.apply(def_wrapper,arguments)})}catch(err){reject.call(def_wrapper,err)}})}else{self.msg=msg;self.state=1;if(self.chain.length>0){schedule(notify,self)}}}catch(err){reject.call(new MakeDefWrapper(self),err)}}function reject(msg){var self=this;if(self.triggered){return}self.triggered=true;if(self.def){self=self.def}self.msg=msg;self.state=2;if(self.chain.length>0){schedule(notify,self)}}function iteratePromises(Constructor,arr,resolver,rejecter){for(var idx=0;idx<arr.length;idx++){(function IIFE(idx){Constructor.resolve(arr[idx]).then(function $resolver$(msg){resolver(idx,msg)},rejecter)})(idx)}}function MakeDefWrapper(self){this.def=self;this.triggered=false}function MakeDef(self){this.promise=self;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function Promise(executor){if(typeof executor!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var def=new MakeDef(this);this["then"]=function then(success,failure){var o={success:typeof success=="function"?success:true,failure:typeof failure=="function"?failure:false};o.promise=new this.constructor(function extractChain(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}o.resolve=resolve;o.reject=reject});def.chain.push(o);if(def.state!==0){schedule(notify,def)}return o.promise};this["catch"]=function $catch$(failure){return this.then(void 0,failure)};try{executor.call(void 0,function publicResolve(msg){resolve.call(def,msg)},function publicReject(msg){reject.call(def,msg)})}catch(err){reject.call(def,err)}}var PromisePrototype=builtInProp({},"constructor",Promise,false);Promise.prototype=PromisePrototype;builtInProp(PromisePrototype,"__NPO__",0,false);builtInProp(Promise,"resolve",function Promise$resolve(msg){var Constructor=this;if(msg&&typeof msg=="object"&&msg.__NPO__===1){return msg}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}resolve(msg)})});builtInProp(Promise,"reject",function Promise$reject(msg){return new this(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}reject(msg)})});builtInProp(Promise,"all",function Promise$all(arr){var Constructor=this;if(ToString.call(arr)!="[object Array]"){return Constructor.reject(TypeError("Not an array"))}if(arr.length===0){return Constructor.resolve([])}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}var len=arr.length,msgs=Array(len),count=0;iteratePromises(Constructor,arr,function resolver(idx,msg){msgs[idx]=msg;if(++count===len){resolve(msgs)}},reject)})});builtInProp(Promise,"race",function Promise$race(arr){var Constructor=this;if(ToString.call(arr)!="[object Array]"){return Constructor.reject(TypeError("Not an array"))}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}iteratePromises(Constructor,arr,function resolver(idx,msg){resolve(msg)},reject)})});return Promise})}).call(exports,function(){return this}(),__webpack_require__(2).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){var nextTick=__webpack_require__(3).nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args)}else{fn.call(null)}exports.clearImmediate(id)}});return id};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(2).setImmediate,__webpack_require__(2).clearImmediate)},function(module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _componentsModalModal=__webpack_require__(5);var _componentsModalModal2=_interopRequireDefault(_componentsModalModal);var _componentsModalContent_handlersHtmlModalContentHandler=__webpack_require__(12);var _componentsModalContent_handlersHtmlModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersHtmlModalContentHandler);var _componentsModalContent_handlersStringModalContentHandler=__webpack_require__(13);var _componentsModalContent_handlersStringModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersStringModalContentHandler);var _componentsModalContent_handlersAjaxModalContentHandler=__webpack_require__(9);var _componentsModalContent_handlersAjaxModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersAjaxModalContentHandler);var _componentsModalContent_handlersIframeModalContentHandler=__webpack_require__(14);var _componentsModalContent_handlersIframeModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersIframeModalContentHandler);var _componentsModalContent_handlersReactModalContentHandler=__webpack_require__(15);var _componentsModalContent_handlersReactModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersReactModalContentHandler);var _componentsConstantsIcons=__webpack_require__(16);var _componentsConstantsIcons2=_interopRequireDefault(_componentsConstantsIcons);var ModalHandler=function(){function ModalHandler(){_classCallCheck(this,ModalHandler);this.HtmlContentHandler=_componentsModalContent_handlersHtmlModalContentHandler2["default"];this.StringContentHandler=_componentsModalContent_handlersStringModalContentHandler2["default"];this.AjaxContentHandler=_componentsModalContent_handlersAjaxModalContentHandler2["default"];this.IframeContentHandler=_componentsModalContent_handlersIframeModalContentHandler2["default"];this.ReactContentHandler=_componentsModalContent_handlersReactModalContentHandler2["default"];this.Icons=_componentsConstantsIcons2["default"];this._modal=null;this.returnData=null;this.resolvePromise=null;this.isShowing=false}_createClass(ModalHandler,[{key:"create",value:function create(){var _this=this;var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return new Promise(function(resolve){if(_this._modal){_this._modal.remove()}_this.returnData=null;_this.resolvePromise=resolve;_this._modal=new _componentsModalModal2["default"](options,_this.destroy.bind(_this));_this.isShowing=true})}},{key:"destroy",value:function destroy(){if(this._modal){this.resolvePromise(this.returnData);this.returnData=null;this._modal.close();this._modal=null;this.isShowing=false}}},{key:"isShowing",get:function get(){return this._isShowing},set:function set(val){this._isShowing=val}},{key:"returnData",get:function get(){return this._returnData},set:function set(val){this._returnData=val}}]);return ModalHandler}();exports["default"]=ModalHandler;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _objectAssign=__webpack_require__(6);var _objectAssign2=_interopRequireDefault(_objectAssign);var _componentsConstantsKeyCodes=__webpack_require__(7);var _componentsConstantsKeyCodes2=_interopRequireDefault(_componentsConstantsKeyCodes);var _componentsModalConstants=__webpack_require__(8);var _componentsModalContent_handlersAjaxModalContentHandler=__webpack_require__(9);var _componentsModalContent_handlersAjaxModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersAjaxModalContentHandler);var DEFAULT_OPTIONS={content_handler:_componentsModalContent_handlersAjaxModalContentHandler2["default"],size:_componentsModalConstants.SIZES.MEDIUM};var Modal=function(){function Modal(options,onCloseCallback){if(options===undefined)options={};_classCallCheck(this,Modal);this._options=(0,_objectAssign2["default"])({},DEFAULT_OPTIONS);(0,_objectAssign2["default"])(this._options,options);this._contentHandler=new this._options.content_handler(this);this.clickCloseFunc=this.handleClickClose.bind(this);this.clickUnderlayFunc=this.handleClickUnderlay.bind(this);this.touchmoveUnderlayFunc=this.handleTouchmoveUnderlay.bind(this);this.keyupFunc=this.handleKeyup.bind(this);this.onCloseCallback=onCloseCallback;this.createElements();this.attachListeners()}_createClass(Modal,[{key:"close",value:function close(){this.fadeOut(this._modalWrapper).then(this.remove.bind(this))}},{key:"remove",value:function remove(){this.detachListeners();this._contentHandler.beforeDestroy(this._modalContentWrapper);document.body.removeChild(this._modal)}},{key:"createElements",value:function createElements(){this.buildStructure();this.insertUnderlay();this._contentHandler.insert()}},{key:"buildStructure",value:function buildStructure(){this._modalHeaderIcon=document.createElement("span");this._modalHeaderIcon.className=_componentsModalConstants.CLASSES.MODAL_HEADER_ICON+" iris_ic is--24 l-hide";this._modalHeaderText=document.createElement("span");var modalCloseSvg='<svg class="iris_icp iris_icp--gray" viewBox="0 0 16 16"><path class="iris_icp-path" d="M10.8 8l4.9-4.9c.4-.4.4-1 0-1.4L14.3.3c-.4-.4-1-.4-1.4 0L8 5.2 3.1.3c-.4-.4-1-.4-1.4 0L.3 1.7c-.4.4-.4 1 0 1.4L5.2 8 .3 12.9c-.4.4-.4 1 0 1.4l1.4 1.4c.4.4 1 .4 1.4 0L8 10.8l4.9 4.9c.4.4 1 .4 1.4 0l1.4-1.4c.4-.4.4-1 0-1.4L10.8 8z"/></svg>';this._modalClose=document.createElement("button");this._modalClose.className=_componentsModalConstants.CLASSES.MODAL_CLOSE;this._modalClose.innerHTML=modalCloseSvg;this._modalHeader=document.createElement("h3");this._modalHeader.id="dialog-title";this._modalHeader.className=_componentsModalConstants.CLASSES.MODAL_HEADER;this._modalHeader.appendChild(this._modalHeaderIcon);this._modalHeader.appendChild(this._modalHeaderText);this._modalHeader.appendChild(this._modalClose);this._modalContentWrapper=document.createElement("div");this._modalContentWrapper.id="dialog-content";this._modalContentWrapper.className=_componentsModalConstants.CLASSES.MODAL_CONTENT;this._modalBox=document.createElement("div");this._modalBox.className=_componentsModalConstants.CLASSES.MODAL_BOX;if(this._options.size===_componentsModalConstants.SIZES.SMALL){this._modalBox.className+=" "+_componentsModalConstants.CLASSES.MODAL_BOX_SMALL}else if(this._options.size===_componentsModalConstants.SIZES.LARGE){this._modalBox.className+=" "+_componentsModalConstants.CLASSES.MODAL_BOX_LARGE}else if(this._options.size===_componentsModalConstants.SIZES.REGISTRATION){this._modalBox.className+=" "+_componentsModalConstants.CLASSES.MODAL_BOX_REGISTRATION}this._modalBox.appendChild(this._modalHeader);this._modalBox.appendChild(this._modalContentWrapper);this._modalBox.setAttribute("role","dialog");this._modalBox.setAttribute("aria-labelledby","dialog-title");this._modalBox.setAttribute("aria-describedby","dialog-content");this._modalBox.setAttribute("tabindex","-1");this._modalUnderlay=document.createElement("div");this._modalUnderlay.className=_componentsModalConstants.CLASSES.MODAL_UNDERLAY;this._modalWrapper=document.createElement("div");this._modalWrapper.className=_componentsModalConstants.CLASSES.MODAL_WRAPPER;this._modalWrapper.appendChild(this._modalUnderlay);this._modal=document.createElement("div");this._modal.className=_componentsModalConstants.CLASSES.MODAL;this._modal.appendChild(this._modalWrapper)}},{key:"insertUnderlay",value:function insertUnderlay(){document.body.appendChild(this._modal);this.fadeIn(this._modalWrapper)}},{key:"insertBox",value:function insertBox(){this._modalWrapper.appendChild(this._modalBox);this.fadeIn(this._modalBox);this._modalBox.focus()}},{key:"showLoader",value:function showLoader(){this._modalLoader=document.createElement("div");this._modalLoader.className="iris_modal-throbber iris_throbber";this._modalLoader.innerHTML='<div class="iris_throbber-dot iris_throbber-dot--blue"></div><div class="iris_throbber-dot iris_throbber-dot--green"></div><div class="iris_throbber-dot iris_throbber-dot--red"></div>';this._modalWrapper.appendChild(this._modalLoader)}},{key:"hideLoader",value:function hideLoader(){this._modalWrapper.removeChild(this._modalLoader)}},{key:"fadeIn",value:function fadeIn(element){element.classList.add("iris_modal--fade-in")}},{key:"fadeOut",value:function fadeOut(element){return new Promise(function(resolve,reject){element.classList.add("iris_modal--fade-out");element.addEventListener("animationend",function(){resolve()});element.addEventListener("webkitAnimationEnd",function(){resolve()})})}},{key:"handleClickClose",value:function handleClickClose(){this.onCloseCallback()}},{key:"handleClickUnderlay",value:function handleClickUnderlay(){this.onCloseCallback()}},{key:"handleTouchmoveUnderlay",value:function handleTouchmoveUnderlay(e){e.preventDefault()}},{key:"handleKeyup",value:function handleKeyup(e){if(e.keyCode===_componentsConstantsKeyCodes2["default"].ESC){e.preventDefault();this.onCloseCallback()}}},{key:"attachListeners",value:function attachListeners(){this._modalClose.addEventListener("click",this.clickCloseFunc);this._modalUnderlay.addEventListener("click",this.clickUnderlayFunc);this._modalUnderlay.addEventListener("touchmove",this.touchmoveUnderlayFunc);document.body.addEventListener("keyup",this.keyupFunc)}},{key:"detachListeners",value:function detachListeners(){this._modalClose.removeEventListener("click",this.clickCloseFunc);this._modalUnderlay.removeEventListener("click",this.clickUnderlayFunc);this._modalUnderlay.removeEventListener("touchmove",this.touchmoveUnderlayFunc);document.body.removeEventListener("keyup",this.keyupFunc)}}]);return Modal}();exports["default"]=Modal;module.exports=exports["default"]},function(module,exports){"use strict";function ToObject(val){if(val==null){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}module.exports=Object.assign||function(target,source){var from;var keys;var to=ToObject(target);for(var s=1;s<arguments.length;s++){from=arguments[s];keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++){to[keys[i]]=from[keys[i]]}}return to}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var KEY_CODES={ENTER:13,TAB:9,UP:38,DOWN:40,ESC:27};exports["default"]=KEY_CODES;module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var CLASSES={MODAL:"iris_modal",MODAL_WRAPPER:"iris_modal-wrapper",MODAL_UNDERLAY:"iris_modal-underlay",MODAL_BOX:"iris_modal-box",MODAL_BOX_SMALL:"iris_modal-box--sm",MODAL_BOX_LARGE:"iris_modal-box--lg",MODAL_BOX_REGISTRATION:"iris_modal-box--reg",MODAL_HEADER:"iris_modal-header",MODAL_HEADER_ICON:"iris_modal-header-icon",MODAL_CONTENT:"iris_modal-content",MODAL_CLOSE:"iris_modal-btn--close"};exports.CLASSES=CLASSES;var SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large",REGISTRATION:"reg"};exports.SIZES=SIZES;var BLOCK="block";exports.BLOCK=BLOCK;var NONE="none";exports.NONE=NONE;var VALIDATION={MODAL:"Invalid modal object",CONTENT_HANDLER:"Invalid ContentHandler class",TITLE:"Missing modal title",CONTENT:"Missing modal content",STRING:"Modal content given is not a string",HTML:"Modal content given is not a valid DOM element",REACT:"Modal content given is not a valid React component",REACT_PLUGIN:"React doesn't exist on this page"};exports.VALIDATION=VALIDATION},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _componentsModalConstants=__webpack_require__(8);var _modulesUtilsSerializeObject=__webpack_require__(10);var _modulesUtilsSerializeObject2=_interopRequireDefault(_modulesUtilsSerializeObject);var _componentsModalContent_handlersAbstractModalContentHandler=__webpack_require__(11);var _componentsModalContent_handlersAbstractModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersAbstractModalContentHandler);var _componentsModalModal=__webpack_require__(5);var _componentsModalModal2=_interopRequireDefault(_componentsModalModal);var AjaxModalContentHandler=function(_AbstractModalContentHandler){_inherits(AjaxModalContentHandler,_AbstractModalContentHandler);function AjaxModalContentHandler(){_classCallCheck(this,AjaxModalContentHandler);_get(Object.getPrototypeOf(AjaxModalContentHandler.prototype),"constructor",this).apply(this,arguments)}_createClass(AjaxModalContentHandler,[{key:"validateOptions",value:function validateOptions(){_get(Object.getPrototypeOf(AjaxModalContentHandler.prototype),"validateOptions",this).call(this);if(typeof this._parentModal._options.content!=="string"){throw new Error(_componentsModalConstants.VALIDATION.STRING)}}},{key:"insert",value:function insert(){var _this=this;this._parentModal.showLoader();this.getIcon();this.getTitle();this.getContent().then(function(){_this.insertIcon();_this.insertTitle();_this.insertContent();_this._parentModal.hideLoader();_this._parentModal.insertBox()})}},{key:"getContent",value:function getContent(){var _this2=this;return new Promise(function(resolve){_this2.getAjaxContent(_this2._parentModal._options.content,_this2._parentModal._options.post_data).then(function(response){if(response.title){_this2._title=response.title}_this2._content=response.content;_this2._scripts=response.scripts;_this2._styles=response.styles;resolve()})})}},{key:"insertContent",value:function insertContent(){if(this._styles){this.appendStyles(this._styles)}this._parentModal._modalContentWrapper.innerHTML=this._content;if(this._scripts){this.appendScripts(this._scripts)}}},{key:"appendScripts",value:function appendScripts(scripts){for(var i=0;i<scripts.length;i++){var modalScript=document.createElement("script");modalScript.setAttribute("src",scripts[i]);this._parentModal._modal.appendChild(modalScript)}}},{key:"appendStyles",value:function appendStyles(styles){for(var i=0;i<styles.length;i++){var modalStyle=document.createElement("link");modalStyle.setAttribute("rel","stylesheet");modalStyle.setAttribute("href",styles[i]);this._parentModal._modal.appendChild(modalStyle)}}},{key:"getAjaxContent",value:function getAjaxContent(url,post_data){return new Promise(function(resolve){var xhr=new XMLHttpRequest;if(post_data){xhr.open("POST",url);xhr.withCredentials=true;xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.send((0,_modulesUtilsSerializeObject2["default"])(post_data))}else{xhr.open("GET",url);xhr.withCredentials=true;xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.send()}xhr.addEventListener("load",function(){var response=JSON.parse(xhr.responseText);if(xhr.status===200){resolve(response)}else{var error_modal={title:"Error",content:response.display_message};resolve(error_modal)}})})}}]);return AjaxModalContentHandler}(_componentsModalContent_handlersAbstractModalContentHandler2["default"]);exports["default"]=AjaxModalContentHandler;module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function serialize(object,base){var query_string=[],result=undefined;for(var key in object){if(object.hasOwnProperty(key)){var value=object[key];if(base){key=base+"["+key+"]"}switch(Object.prototype.toString.call(value)){case"[object Object]":result=serialize(value,key);break;case"[object Array]":var temp_qs={};if(value.length===0){value=null}else{for(var i=0,limit=value.length;i<limit;i++){temp_qs[i]=value[i]}result=serialize(temp_qs,key)}break;default:result=key+"="+encodeURIComponent(value)}if(value!==null){query_string.push(result)}}}return query_string.join("&")}exports["default"]=serialize;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _componentsModalConstants=__webpack_require__(8);var _componentsModalModal=__webpack_require__(5);var _componentsModalModal2=_interopRequireDefault(_componentsModalModal);var AbstractModalContentHandler=function(){function AbstractModalContentHandler(modal){_classCallCheck(this,AbstractModalContentHandler);if(!(modal instanceof _componentsModalModal2["default"])){throw new Error(_componentsModalConstants.VALIDATION.MODAL)}this._parentModal=modal;this.validateOptions()}_createClass(AbstractModalContentHandler,[{key:"insert",value:function insert(){this.getIcon();this.getTitle();this.getContent();this.insertIcon();this.insertTitle();this.insertContent();this._parentModal.insertBox()}},{key:"validateOptions",value:function validateOptions(){if(!this._parentModal._options.content){throw new Error(_componentsModalConstants.VALIDATION.CONTENT)}}},{key:"getIcon",value:function getIcon(){this._icon=this._parentModal._options.icon}},{key:"getTitle",value:function getTitle(){this._title=this._parentModal._options.title}},{key:"getContent",value:function getContent(){this._content=this._parentModal._options.content}},{key:"insertIcon",value:function insertIcon(){if(this._icon){this._parentModal._modalHeaderIcon.innerHTML=this._icon;this._parentModal._modalHeaderIcon.classList.remove("l-hide")}}},{key:"insertTitle",value:function insertTitle(){if(this._title){this._parentModal._modalHeaderText.textContent=this._title}}},{key:"insertContent",value:function insertContent(){}},{key:"beforeDestroy",value:function beforeDestroy(){}}]);return AbstractModalContentHandler}();exports["default"]=AbstractModalContentHandler;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _componentsModalConstants=__webpack_require__(8);var _componentsModalContent_handlersAbstractModalContentHandler=__webpack_require__(11);var _componentsModalContent_handlersAbstractModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersAbstractModalContentHandler);var _componentsModalModal=__webpack_require__(5);var _componentsModalModal2=_interopRequireDefault(_componentsModalModal);var HtmlModalContentHandler=function(_AbstractModalContentHandler){_inherits(HtmlModalContentHandler,_AbstractModalContentHandler);function HtmlModalContentHandler(){_classCallCheck(this,HtmlModalContentHandler);_get(Object.getPrototypeOf(HtmlModalContentHandler.prototype),"constructor",this).apply(this,arguments)}_createClass(HtmlModalContentHandler,[{key:"validateOptions",value:function validateOptions(){_get(Object.getPrototypeOf(HtmlModalContentHandler.prototype),"validateOptions",this).call(this);if(!this._parentModal._options.title){throw new Error(_componentsModalConstants.VALIDATION.TITLE)}if(!this._parentModal._options.content.nodeName){throw new Error(_componentsModalConstants.VALIDATION.HTML)}}},{key:"insertContent",value:function insertContent(){this._parentModal._modalContentWrapper.appendChild(this._content);
}}]);return HtmlModalContentHandler}(_componentsModalContent_handlersAbstractModalContentHandler2["default"]);exports["default"]=HtmlModalContentHandler;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _componentsModalConstants=__webpack_require__(8);var _componentsModalContent_handlersAbstractModalContentHandler=__webpack_require__(11);var _componentsModalContent_handlersAbstractModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersAbstractModalContentHandler);var _componentsModalModal=__webpack_require__(5);var _componentsModalModal2=_interopRequireDefault(_componentsModalModal);var StringModalContentHandler=function(_AbstractModalContentHandler){_inherits(StringModalContentHandler,_AbstractModalContentHandler);function StringModalContentHandler(){_classCallCheck(this,StringModalContentHandler);_get(Object.getPrototypeOf(StringModalContentHandler.prototype),"constructor",this).apply(this,arguments)}_createClass(StringModalContentHandler,[{key:"validateOptions",value:function validateOptions(){_get(Object.getPrototypeOf(StringModalContentHandler.prototype),"validateOptions",this).call(this);if(!this._parentModal._options.title){throw new Error(_componentsModalConstants.VALIDATION.TITLE)}if(typeof this._parentModal._options.content!=="string"){throw new Error(_componentsModalConstants.VALIDATION.STRING)}}},{key:"insertContent",value:function insertContent(){this._parentModal._modalContentWrapper.textContent=this._content}}]);return StringModalContentHandler}(_componentsModalContent_handlersAbstractModalContentHandler2["default"]);exports["default"]=StringModalContentHandler;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _componentsModalConstants=__webpack_require__(8);var _componentsModalContent_handlersAbstractModalContentHandler=__webpack_require__(11);var _componentsModalContent_handlersAbstractModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersAbstractModalContentHandler);var _componentsModalModal=__webpack_require__(5);var _componentsModalModal2=_interopRequireDefault(_componentsModalModal);var IframeModalContentHandler=function(_AbstractModalContentHandler){_inherits(IframeModalContentHandler,_AbstractModalContentHandler);function IframeModalContentHandler(){_classCallCheck(this,IframeModalContentHandler);_get(Object.getPrototypeOf(IframeModalContentHandler.prototype),"constructor",this).apply(this,arguments)}_createClass(IframeModalContentHandler,[{key:"validateOptions",value:function validateOptions(){_get(Object.getPrototypeOf(IframeModalContentHandler.prototype),"validateOptions",this).call(this);if(!this._parentModal._options.title){throw new Error(_componentsModalConstants.VALIDATION.TITLE)}if(typeof this._parentModal._options.content!=="string"){throw new Error(_componentsModalConstants.VALIDATION.STRING)}}},{key:"insertContent",value:function insertContent(){var iframe=document.createElement("iframe");iframe.setAttribute("src",this._parentModal._options.content);this._parentModal._modalContentWrapper.appendChild(iframe)}}]);return IframeModalContentHandler}(_componentsModalContent_handlersAbstractModalContentHandler2["default"]);exports["default"]=IframeModalContentHandler;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _componentsModalConstants=__webpack_require__(8);var _componentsModalContent_handlersAbstractModalContentHandler=__webpack_require__(11);var _componentsModalContent_handlersAbstractModalContentHandler2=_interopRequireDefault(_componentsModalContent_handlersAbstractModalContentHandler);var _componentsModalModal=__webpack_require__(5);var _componentsModalModal2=_interopRequireDefault(_componentsModalModal);var ReactModalContentHandler=function(_AbstractModalContentHandler){_inherits(ReactModalContentHandler,_AbstractModalContentHandler);function ReactModalContentHandler(){_classCallCheck(this,ReactModalContentHandler);_get(Object.getPrototypeOf(ReactModalContentHandler.prototype),"constructor",this).apply(this,arguments)}_createClass(ReactModalContentHandler,[{key:"_getReactRenderer",value:function _getReactRenderer(){if(window.React){return window.React}if(window.ReactDOM){return window.ReactDOM}return null}},{key:"validateOptions",value:function validateOptions(){_get(Object.getPrototypeOf(ReactModalContentHandler.prototype),"validateOptions",this).call(this);if(!this._parentModal._options.title){throw new Error(_componentsModalConstants.VALIDATION.TITLE)}if(!this._getReactRenderer()){throw new Error(_componentsModalConstants.VALIDATION.REACT_PLUGIN)}}},{key:"insertContent",value:function insertContent(){this._getReactRenderer().render(this._parentModal._options.content,this._parentModal._modalContentWrapper)}},{key:"beforeDestroy",value:function beforeDestroy(modal_el){this._getReactRenderer().unmountComponentAtNode(modal_el)}}]);return ReactModalContentHandler}(_componentsModalContent_handlersAbstractModalContentHandler2["default"]);exports["default"]=ReactModalContentHandler;module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Icons={Share:'<svg viewBox="0 0 24 24"><path d="M0 14l6.6 4.1L16.5 9 9 19.6V23l2-2 5 3 8-24"/></svg>'};exports["default"]=Icons;module.exports=exports["default"]}]);(function(){"use strict";namespace("vimeo.ui");var default_options={onOpen:function(){},onClose:function(){},onToggle:function(){}};vimeo.ui.Togglebox=function(element,options){var self=this;if(!element){throw new Error("Invalid element supplied to ToggleBox")}if(!$(element).attr("data-trigger")){throw new Error("Toggle box is missing a trigger")}self.options=$.extend({},default_options,options);self.element=$(element);self.trigger=$("#"+self.element.attr("data-trigger"));if(self.trigger.hasClass("toggle_box_trigger")){return}self.element.data("togglebox",self.element);self.trigger.data("togglebox",self.element);self.trigger.addClass("toggle_box_trigger");self.attachEvents();return self.element};vimeo.ui.Togglebox.prototype.attachEvents=function(){var self=this;if(self.trigger.attr("type")==="radio"){var form=self.trigger.parents("form").first();form.on("click",'input[name="'+self.trigger.get("name")+'"]',self.onToggleRadio.bind(self))}else{self.trigger.on("click",self.onToggle.bind(self))}};vimeo.ui.Togglebox.prototype.onToggle=function(e){var self=this,trigger_type=self.trigger.attr("type");if(trigger_type==="checkbox"){return self.toggleRadioCheck()}if(e){e.preventDefault()}self.toggleNormal()};vimeo.ui.Togglebox.prototype.onToggleRadio=function(e){this.toggleRadioCheck()};vimeo.ui.Togglebox.prototype.toggleRadioCheck=function(){var self=this;if(self.trigger.is(":checked")){self.show()}else{self.hide()}};vimeo.ui.Togglebox.prototype.toggleNormal=function(attribute){var self=this,current_text,swap_text,checked=self.trigger.attr("data-checked");if(self.trigger.attr("data-swap-text")){current_text=self.trigger.text();swap_text=self.trigger.attr("data-swap-text");self.trigger.text(swap_text);self.trigger.attr("data-swap-text",current_text)}if(!checked||checked==="off"){self.trigger.attr("data-checked","on");self.show()}else if(self.trigger.attr("data-checked")==="on"){self.trigger.attr("data-checked","off");self.hide()}};vimeo.ui.Togglebox.prototype.show=function(){var self=this,input=self.element.find("input");self.element.show();if(input&&!input.val()&&input.attr("autofocus")){input.focus()}if(input&&input.attr("data-autoselect")){input.select()}self.element.trigger("open");self.options.onOpen();self.element.trigger("toggle");self.options.onToggle()};vimeo.ui.Togglebox.prototype.hide=function(){var self=this;self.element.hide();self.element.trigger("close");self.options.onClose();self.element.trigger("toggle");self.options.onToggle()}})();namespace("vimeo.ui.forager");(function(){"use strict";var NO_HOVER_CLASS="fg_nohover",SELECTED_CLASS="selected",default_options={user_id:null,display_name:null,portrait:null,email:null,element:null};vimeo.ui.forager.User=function(options){var self=this;self.options=$.extend({},default_options,options);if(self.options.user_id===null){throw new Error("UserId required for new ForagerUser")}self.is_favorite=false;self.is_selected=self.options.element.hasClass(SELECTED_CLASS);self.user_id=self.options.user_id;self.display_name=self.options.display_name;self.portrait=self.options.portrait;self.email=self.options.email;self.element=self.options.element;self.init_no_hover=self.options.init_no_hover;self.setupUser();self.attachEvents()};vimeo.ui.forager.User.prototype.setupUser=function(){var self=this;self.is_favorite=self.checkAgainstFavorites()};vimeo.ui.forager.User.prototype.attachEvents=function(){var self=this;self.element.on("click",self.toggleSelected.bind(self));if(self.init_no_hover){self.attachNoHoverFunctionality()}};vimeo.ui.forager.User.prototype.attachNoHoverFunctionality=function(){var self=this;self.addNoHoverClass();self.element.one("mouseleave",self.removeNoHoverClass.bind(self))};vimeo.ui.forager.User.prototype.handleSelectedClass=function(){var self=this;if(self.is_selected){self.element.addClass(SELECTED_CLASS)}else{self.element.removeClass(SELECTED_CLASS)}};vimeo.ui.forager.User.prototype.removeNoHoverClass=function(){var self=this;self.element.removeClass(NO_HOVER_CLASS)};vimeo.ui.forager.User.prototype.addNoHoverClass=function(){var self=this;self.element.addClass(NO_HOVER_CLASS)},vimeo.ui.forager.User.prototype.toggleSelected=function(){var self=this;self.is_selected=!self.is_selected;if(self.is_selected){self.attachNoHoverFunctionality()}self.setSelectState(self.is_selected)};vimeo.ui.forager.User.prototype.setSelectState=function(state){var self=this;if(state!==false&&state!==true){return}self.is_selected=state;self.handleSelectedClass();Signal.forager.user.selected.dispatch({user_id:self.user_id,email:self.email,is_selected:state})};vimeo.ui.forager.User.prototype.toggleFavorite=function(){var self=this;if(self.is_favorite){self.removeAsFavorite()}else{self.setAsFavorite()}};vimeo.ui.forager.User.prototype.checkAgainstFavorites=function(){var self=this,favorites,umatch,ematch,found=false,ls=!!window.localStorage&&localStorage.user_forager_favorites,c=$.cookie("user_forager_favorites"),i,len,user;if(ls||c){if(ls){favorites=JSON.parse(localStorage.user_forager_favorites)}else{favorites=JSON.parse($.cookie("user_forager_favorites"))}for(i=0,len=favorites.length;i<len;i++){user=favorites[i];umatch=+self.user_id!==-1&&+self.user_id===+user.user_id;ematch=self.email&&self.email===user.email;if(umatch||ematch){found=true;break}}}return found},vimeo.ui.forager.User.prototype.hide=function(){this.element.hide()};vimeo.ui.forager.User.prototype.show=function(){this.element.show()},vimeo.ui.forager.User.prototype.isFavorite=function(){return this.is_favorite};vimeo.ui.forager.User.prototype.isSelected=function(){return this.is_selected};vimeo.ui.forager.User.prototype.setAsSelected=function(){var self=this;self.is_selected=true;self.element.addClass(SELECTED_CLASS)};vimeo.ui.forager.User.prototype.removeAsSelected=function(){var self=this;self.is_selected=false;self.element.removeClass(SELECTED_CLASS)};vimeo.ui.forager.User.prototype.setAsFavorite=function(){this.is_favorite=true};vimeo.ui.forager.User.prototype.removeAsFavorite=function(){this.is_favorite=false}})();namespace("vimeo.ui.forager");(function(){"use strict";var default_options={url:null};vimeo.ui.forager.Collection=function(options){var self=this;self.options=$.extend({},default_options,options);self.original_selected_ids=[];self.models=[];self.trie={}};vimeo.ui.forager.Collection.prototype.buildTrie=function(){var self=this;self.trie={};$.each(self.models,function(i,model){var words_in_display_name,name;if(model.user_id){self.addTrieLeaf(model.user_id.toString(),model)}if(model.display_name){name=model.display_name.toLowerCase();words_in_display_name=name.split(" ");$.each(words_in_display_name,function(i,word){self.addTrieLeaf(word,model)});self.addTrieLeaf(name.replace(/\s+/,""),model)}if(model.email){self.addTrieLeaf(model.email.toLowerCase(),model)}})};vimeo.ui.forager.Collection.prototype.addTrieLeaf=function(leaf_key,leaf_object){var self=this,trie=self.trie,branch=leaf_key.charAt(0);if(!trie[branch]){trie[branch]={}}if(!trie[branch][leaf_key]){trie[branch][leaf_key]=[]}if(trie[branch][leaf_key].indexOf(leaf_object)<0){trie[branch][leaf_key].push(leaf_object)}};vimeo.ui.forager.Collection.prototype.removeTrieLeaf=function(leaf_key){var self=this,trie=self.trie,branch=leaf_key.charAt(0);if(!trie[branch]||!!trie[branch][leaf_key]){return false}delete trie[branch][leaf_key];if(Object.getLength(trie[branch])===0){delete trie[branch]}return true};vimeo.ui.forager.Collection.prototype.validateModel=function(model){var self=this,found=false,i,len,user;if(!model){return false}for(i=0,len=self.models.length;i<len;i++){user=self.models[i];if(model.user_id===user.user_id){if(+user.user_id===-1){if(model.email===user.email){found=true;break}}else{found=true;break}}}return!found};vimeo.ui.forager.Collection.prototype.setSelectStateOfUserByEmail=function(email,state){var self=this,found=false,i,len,model;for(i=0,len=self.models.length;i<len;i++){model=self.models[i];if(model.email===email){found=true;model.setSelectState(state);break}}return found};vimeo.ui.forager.Collection.prototype.add=function(model,build){var self=this,is_new_model=self.validateModel(model);if(is_new_model){self.models.push(model)}if(build===true){self.buildTrie()}};vimeo.ui.forager.Collection.prototype.addAndBuild=function(model){this.add(model,true)};vimeo.ui.forager.Collection.prototype.remove=function(model,build){var self=this,index=self.models.indexOf(model);if(index===-1){return}self.models.splice(index,1);if(build===true){self.buildTrie()}};vimeo.ui.forager.Collection.prototype.removeAndBuild=function(model){this.remove(model,true)};vimeo.ui.forager.Collection.prototype.getById=function(id){var self=this,matches=[],found=false,i,len,model;for(i=0,len=self.models.length;i<len;i++){model=self.models[i];if(+model.user_id===+id){found=true;if(+id===-1){matches.push(model)}else{matches=model;break}}}if(!found){return false}return matches};vimeo.ui.forager.Collection.prototype.getByEmail=function(email){var self=this,match="",found=false,i,len,model;for(i=0,len=self.models.length;i<len;i++){model=self.models[i];if(model.email===email){found=true;match=model;break}}if(!found){return false}return match};vimeo.ui.forager.Collection.prototype.removeTempUsers=function(keep_selected,build){var self=this,index=[],i,len,position,diff=0;$.each(self.models,function(i,model){if(+model.user_id===-1){if(keep_selected&&model.isSelected()){return}index.push(i)}});for(i=0,len=index.length;i<len;i++){position=index[i]-diff;self.remove(self.models[position]);diff=diff+1}if(build===true){self.buildTrie()}};vimeo.ui.forager.Collection.prototype.removeTempUsersAndBuild=function(keep_selected){this.removeTempUsers(keep_selected,true)};vimeo.ui.forager.Collection.prototype.deselectAll=function(){$.each(this.models,function(i,model){model.setSelectState(false)})};vimeo.ui.forager.Collection.prototype.deselectUserByEmail=function(email){return this.setSelectStateOfUserByEmail(email,false)};vimeo.ui.forager.Collection.prototype.selectUserByEmail=function(email){return this.setSelectStateOfUserByEmail(email,true)};vimeo.ui.forager.Collection.prototype.build=function(){this.buildTrie()};vimeo.ui.forager.Collection.prototype.hideAll=function(){$.each(this.models,function(i,user){user.hide()})};vimeo.ui.forager.Collection.prototype.showAll=function(){$.each(this.models,function(i,user){user.show()})};vimeo.ui.forager.Collection.prototype.inTrie=function(val){var self=this,first,branch,found=false,leaf;if(!val){return}first=val.charAt(0);branch=self.trie[first];if(!branch){return false}if(found){return branch[leaf]}return false};vimeo.ui.forager.Collection.prototype.getAddedIds=function(){var self=this,added=[],selected=self.getSelectedUserIds();for(var i=0,len=selected.length;i<len;i++){if(self.original_selected_ids.indexOf(selected[i])<0){added.push(selected[i])}}return added};vimeo.ui.forager.Collection.prototype.getRemovedIds=function(){var self=this,removed=[],selected=self.getSelectedUserIds();for(var i=0,len=self.original_selected_ids.length;i<len;i++){if(selected.indexOf(self.original_selected_ids[i])<0){removed.push(self.original_selected_ids[i])}}return removed};vimeo.ui.forager.Collection.prototype.getSelected=function(ids_only){var self=this,selected=[];$.each(self.models,function(i,model){if(model.isSelected()){if(ids_only===true){selected.push(+model.user_id)}else{selected.push(model)}}});return selected};vimeo.ui.forager.Collection.prototype.getSelectedUserIds=function(){return this.getSelected(true)};vimeo.ui.forager.Collection.prototype.getFavorites=function(ids_only){var self=this,favorites=[];$.each(self.models,function(i,model){if(model.isFavorite()){if(ids_only===true){favorites.push(+model.user_id)}else{favorites.push(model)}}});return favorites};vimeo.ui.forager.Collection.prototype.getFavoritesUserIds=function(){return this.getFavorites(true)}})();namespace("vimeo.ui.forager");(function(Collection,User){"use strict";var FILTER_FAVORITES="fg_filter_favorites",FILTER_ALL="fg_filter_all",FILTER_SELECTED="fg_filter_selected",EMAIL_REGEX=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,SELECTED_CLASS="selected",ONE_DAY=1e3*60*60*24,default_options={container:"fg",url:"/user/forage_browse",search_element_class:"fg_search",add_email:true,max_favorites:0,defer:true,defer_until_focus:false,expire_favorites:30};vimeo.ui.forager.Main=function(options){var self=this;self.options=$.extend({},default_options,options);self.container=$("."+self.options.container);self.search=self.container.find("."+self.options.search_element_class);if(!self.container.length){throw new Error("Container required for Forager")}if(self.options.defer||self.options.defer_until_focus){if(self.options.defer_until_focus){self.options.defer_until_focus=false;self.search.one("focus",self.forage.bind(self))}return self}self.init()};vimeo.ui.forager.Main.prototype.init=function(){var self=this;self.collection=new Collection;self.createElements();self.hideLoader();self.attachEvents();if(self.hasFavoritesInStorage()&&vimeo.cur_user){self.current_filter=FILTER_FAVORITES;self.setAndRunSelectedFilter();self.filter_favorites.show()}else{self.current_filter=FILTER_ALL;self.setSelectedFilter();self.filter_favorites.hide()}if(self.container.hasClass("empty")){self.showForagerMessage(FILTER_ALL)}};vimeo.ui.forager.Main.prototype.forage=function(){var self=this;if(self.options.defer===false){return}self.options.defer=false;$.ajax({url:self.options.url,success:self.onForagerRequestSuccess.bind(self),error:self.onForagerRequestFailure.bind(self)})};vimeo.ui.forager.Main.prototype.createElements=function(){var self=this;self.filters=self.container.find(".fg_filters");self.browse_list=self.container.find(".fg_browse");self.filter_favorites=self.filters.find("."+FILTER_FAVORITES);self.filter_all=self.filters.find("."+FILTER_ALL);self.filter_selected=self.filters.find("."+FILTER_SELECTED);self.selected_count=self.container.find(".selected_count");self.search_clear=self.container.find(".fg_search_clear");self.loader=self.container.find(".fg_search_loader");self.forager_messages=self.container.find(".fg_search_no_results");self.loader=self.container.find(".fg_search_loading");self.no_search=self.container.find(".fg_no_search");self.no_favorites=self.container.find(".fg_no_favorites");self.no_all=self.container.find(".fg_no_all");self.no_selected=self.container.find(".fg_no_selected");self.temp_user=self.browse_list.find(".fg_temp_user");self.temp_user_name=self.temp_user.find(".fg_temp_user_name");self.current_filter=null;self.previous_filter=null;self.filter_map={fg_filter_favorites:"filterFavorites",fg_filter_all:"filterAll",fg_filter_selected:"filterSelected"};self.startCollection()};vimeo.ui.forager.Main.prototype.attachEvents=function(){var self=this;if(self.filter_favorites){self.filter_favorites.on("click",self.onFilterFavorites.bind(self))}self.search.on("keyup",self.onSearchKeyup.bind(self));self.search.on("input",self.onSearchKeyup.bind(self));self.filter_all.on("click",self.onFilterAll.bind(self));self.filter_selected.on("click",self.onFilterSelected.bind(self));self.search_clear.on("click",self.onSearchClear.bind(self));self.temp_user.on("click",self.onEmailItemAdd.bind(self));Signal.forager.user.selected.add(self.updateCount.bind(self));Signal.forager.user.add_email.add(self.onEmailItemAdd.bind(self));Signal.forager.user.update_favorites.add(self.setFavorites.bind(self));Signal.forager.input.clear.add(self.clearInput.bind(self));Signal.forager.reset.add(self.clearForager.bind(self));Signal.forager.filter.selected.add(self.filterSelected.bind(self));Signal.forager.filter.all.add(self.filterAll.bind(self));Signal.forager.filter.favorites.add(self.filterFavorites.bind(self))};vimeo.ui.forager.Main.prototype.startCollection=function(){var self=this,people=self.browse_list.find("li"),image,id,name,portrait,user,count=0;$.each(people,function(i,person){person=$(person);id=person.attr("data-user-id");if(+id===-1){return}image=person.find("img");name=person.find("a").text();portrait=image.src;user=new User({user_id:id,display_name:name,portrait:portrait,element:person});if(user.isSelected()){count=count+=1;self.collection.original_selected_ids.push(+id)}self.collection.add(user)});self.selected_count.text(count);self.collection.build()};vimeo.ui.forager.Main.prototype.showLoader=function(){this.loader.show()};vimeo.ui.forager.Main.prototype.hideLoader=function(){this.loader.hide()};vimeo.ui.forager.Main.prototype.onFilterSelected=function(e){e.preventDefault();var self=this;if(self.current_filter===FILTER_SELECTED){return}self.filterSelected()};vimeo.ui.forager.Main.prototype.onFilterAll=function(e){e.preventDefault();var self=this;if(self.current_filter===FILTER_ALL){return}self.onSearchClear();self.filterAll()};vimeo.ui.forager.Main.prototype.onFilterFavorites=function(e){e.preventDefault();var self=this;if(self.current_filter===FILTER_FAVORITES){return}self.filterFavorites()};vimeo.ui.forager.Main.prototype.onSearchKeyup=function(e){var self=this,allow_email=self.options.add_email;if(self.search.val().length>0){self.search_clear.show();self.unsetSelectedFilter();if(EMAIL_REGEX.test(self.search.val())&&allow_email){self.handleEmailSearch()}else{self.temp_user.hide();self.handleUserSearch()}}else{self.hideForagerMessages();self.search_clear.hide();self.setAndRunSelectedFilter()}};vimeo.ui.forager.Main.prototype.onSearchClear=function(){this.clearSearch()};vimeo.ui.forager.Main.prototype.onEmailItemAdd=function(e){var self=this,email=self.temp_user_name.text();if(self.collection.inTrie(email)||!EMAIL_REGEX.test(email)){return}self.temp_user.toggleClass(SELECTED_CLASS);self.createUserFromLi(self.temp_user);if(self.temp_user.hasClass(SELECTED_CLASS)){self.collection.selectUserByEmail(email)}else{self.collection.deselectUserByEmail(email)}self.collection.build();self.updateCount()};vimeo.ui.forager.Main.prototype.onForagerClear=function(){this.clearForager()};vimeo.ui.forager.Main.prototype.onForagerRequestSuccess=function(tree){var self=this,user_list=self.container.find(".js-userlist");user_list.append(tree);self.init()};vimeo.ui.forager.Main.prototype.onForagerRequestFailure=function(xhr){console.log(xhr)};vimeo.ui.forager.Main.prototype.deselectAll=function(){this.collection.deselectAll()};vimeo.ui.forager.Main.prototype.filterSelected=function(){var self=this,at_least_one=false;self.current_filter=FILTER_SELECTED;self.setSelectedFilter();self.hideForagerMessages();$.each(self.collection.models,function(i,forager_user){if(forager_user.isSelected()){forager_user.show();at_least_one=true}else{forager_user.hide()}});if(!at_least_one){self.showForagerMessage(FILTER_SELECTED)}};vimeo.ui.forager.Main.prototype.filterAll=function(){var self=this;self.current_filter=FILTER_ALL;self.setSelectedFilter();self.hideForagerMessages();if(self.collection.models.length){$.each(self.collection.models,function(i,forager_user){forager_user.show()})}else{self.showForagerMessage(FILTER_ALL)}};vimeo.ui.forager.Main.prototype.filterFavorites=function(){var self=this,at_least_one=false;self.current_filter=FILTER_FAVORITES;self.setSelectedFilter();self.hideForagerMessages();$.each(self.collection.models,function(i,forager_user){if(forager_user.isFavorite()){forager_user.show();at_least_one=true}else{forager_user.hide()}});if(!at_least_one){self.showForagerMessage(FILTER_FAVORITES)}};vimeo.ui.forager.Main.prototype.getFavoritesFromStorage=function(){var self=this,favorites=[],users,now=+new Date,limit=ONE_DAY*self.options.expire_favorites;if(self.hasFavoritesInStorage()){if(!!window.localStorage){users=JSON.parse(localStorage.user_forager_favorites)}else{users=JSON.parse($.cookie("user_forager_favorites"))}$.each(users,function(i,user){if(now-user.added<limit){favorites.push(user)}})}return favorites};vimeo.ui.forager.Main.prototype.hasFavoritesInStorage=function(){var decoded="";if(window.localStorage&&localStorage.user_forager_favorites){decoded=JSON.parse(localStorage.user_forager_favorites)}else if($.cookie("user_forager_favorites")){decoded=JSON.parse($.cookie("user_forager_favorites"))}return decoded&&decoded.length};vimeo.ui.forager.Main.prototype.setFavorites=function(){var self=this,selected=self.collection.getSelected(),values=self.getFavoritesFromStorage(),now=+new Date;$.each(selected,function(i,user){var obj={};if(user.isFavorite()||+user.user_id===-1){return}user.toggleFavorite();obj.user_id=user.user_id;obj.email=user.email;obj.added=now;values.push(obj)});if(!!window.localStorage){localStorage.user_forager_favorites=JSON.stringify(values)}else{$.cookie("user_forager_favorites",JSON.stringify(values))}};vimeo.ui.forager.Main.prototype.clearFavorites=function(){var self=this,favorites;if(self.hasFavoritesInStorage()){if(!!window.localStorage){favorites=JSON.parse(localStorage.user_forager_favorites)}else{favorites=JSON.parse($.cookie("user_forager_favorites"))}$.each(favorites,function(i,favorite){var user;if(+favorite.user_id>-1){user=self.collection.getById(favorite.user_id)}else{user=self.collection.getByEmail(favorite.email)}if(user.isFavorite()){user.toggleFavorite()}});if(!!window.localStorage){localStorage.user_forager_favorites=""}else{$.cookie("user_forager_favorites","")}}};vimeo.ui.forager.Main.prototype.clearInput=function(){
var self=this;self.search.val("");self.search_clear.hide()};vimeo.ui.forager.Main.prototype.clearSearch=function(){var self=this;self.clearInput();self.filterAll();self.hideForagerMessages();self.deleteDomTempUsers()};vimeo.ui.forager.Main.prototype.clearForager=function(){var self=this;self.clearSearch();self.deselectAll()};vimeo.ui.forager.Main.prototype.getSearchElement=function(){return this.search};vimeo.ui.forager.Main.prototype.setSelectedFilter=function(run_function){var self=this,current=self.filters.find("."+SELECTED_CLASS),func;if(self.current_filter){if(current){current.removeClass(SELECTED_CLASS)}self.filters.find("."+self.current_filter).addClass(SELECTED_CLASS)}else{self.filters.find("."+self.previous_filter).addClass(SELECTED_CLASS);self.current_filter=self.previous_filter}if(run_function===true){func=self.filter_map[self.current_filter];self[func]()}};vimeo.ui.forager.Main.prototype.unsetSelectedFilter=function(){var self=this,current=self.filters.find("."+self.current_filter);if(current.length){current.removeClass(SELECTED_CLASS);self.previous_filter=self.current_filter;self.current_filter=null}};vimeo.ui.forager.Main.prototype.setAndRunSelectedFilter=function(){this.setSelectedFilter(true)};vimeo.ui.forager.Main.prototype.updateCount=function(){var self=this,count=0;$.each(self.collection.models,function(i,model){if(model.isSelected()){count=count+1}});self.selected_count.text(count)};vimeo.ui.forager.Main.prototype.handleEmailSearch=function(){var self=this,users,val;clearTimeout(self.search_timer);self.hideForagerMessages();self.search_timer=setTimeout(function(){self.collection.hideAll();self.temp_user.hide();val=$.trim(self.search.val()).toLowerCase();users=self.collection.inTrie(val);if(users){$.each(users,function(i,user){user.show()});return}self.temp_user_name.text(val);self.temp_user_name.title=val;self.temp_user.show();self.temp_user.removeClass(SELECTED_CLASS)},300)};vimeo.ui.forager.Main.prototype.createUserFromEmail=function(){var self=this,li;li=self.temp_user;self.deleteDomTempUsers();self.createUserFromLi(li)};vimeo.ui.forager.Main.prototype.createUserFromLi=function(list_item,selected){var self=this,data={},select_state=selected?true:false,person,evt=window.event,li=list_item.clone();self.browse_list.append(li);self.temp_user.hide();data.user_id=li.attr("data-user-id");data.display_name=$.trim(li.text());if(li.find("img").length){data.portrait=li.find("img").attr("src")}else if(evt&&evt.type==="click"){data.init_no_hover=true}data.email=self.search.val().toLowerCase();data.element=li;person=new User(data);person.setSelectState(select_state);self.collection.addAndBuild(person);self.updateCount();return person};vimeo.ui.forager.Main.prototype.deleteDomTempUsers=function(){var self=this;self.browse_list.find(".fg_temp").not("#fg_temp_user").not("."+SELECTED_CLASS).remove()};vimeo.ui.forager.Main.prototype.handleUserSearch=function(){var self=this,value=$.trim(self.search.val()).toLowerCase().replace(/\s+/,""),users=self.collection.models,trie=self.collection.trie,branch=value.charAt(0),results=[];clearTimeout(self.search_timer);self.search_timer=setTimeout(function(){self.collection.hideAll();self.forager_messages.hide();self.collection.removeTempUsersAndBuild(true);self.deleteDomTempUsers();if(value.length>0&&trie[branch]){$.each(trie[branch],function(key,leaf){if(key.indexOf(value)===0){results.push(leaf[0]);leaf[0].show()}})}else if(value.length===0){$.each(users,function(i,user){user.show()});return}if(!results.length||!users.length||value.length>0&&!trie[branch]){self.showForagerMessage()}},100)};vimeo.ui.forager.Main.prototype.hideForagerMessages=function(){this.forager_messages.hide()};vimeo.ui.forager.Main.prototype.showForagerMessage=function(type){var self=this;self.hideForagerMessages();switch(type){case FILTER_SELECTED:self.no_selected.show();break;case FILTER_FAVORITES:self.no_favorites.show();break;case FILTER_ALL:self.no_all.show();break;default:if(vimeo.cur_user){self.no_search.show()}}}})(vimeo.ui.forager.Collection,vimeo.ui.forager.User);namespace("vimeo.share");(function(Lightbox){"use strict";var last_clip_id=null,share_module;vimeo.share.Popup=function(clip_id,share_url,is_vod,referrer_context){var context=referrer_context||"player",lb;function init(){if(!share_url){share_url="/"+clip_id+"?action=share&responsive=true"}if(Lightbox.activePopup&&typeof Lightbox.activePopup==="object"&&typeof Lightbox.activePopup.closeAndDestroy==="function"){Lightbox.activePopup.closeAndDestroy();Lightbox.activePopup=null}Lightbox.activePopup=lb=new Lightbox({id:"share_lb_"+clip_id,url:share_url,class_name:"share_popup_action",max_width:550,position:is_vod?"fixed":"absolute",flexbox:is_vod,cache:false,onOpen:onShareLightboxOpen});lb.open()}function initToggleBoxes(parent_el){if(typeof vimeo.ui.Togglebox==="undefined"){return}$.each(parent_el.find(".toggle_box"),function(i,toggle){new vimeo.ui.Togglebox(toggle,{onToggle:function onShareboxToggle(){lb.centerWindow()}})})}function onShareLightboxOpen(content){var html=$(content);vimeo.Global.insertAssets(function onAssetLoad(){initToggleBoxes(html);share_module=new vimeo.share.Main({clip_id:clip_id,referrer_context:context});PlayerManager.run()});if(typeof share_module!=="undefined"){share_module.refreshTracking(context)}}init()}})(vimeo.ui.Lightbox);(function(root,factory){if(typeof define==="function"&&define.amd){define(function(){return root.NumberUtility=factory()})}else if(typeof exports==="object"){module.exports=factory()}else{root.NumberUtility=factory()}})(this,function(){"use strict";var NumberUtility={};NumberUtility.formatBigNumber=function(number){var base_number=parseInt(number,10),small_number,decimal,unit="";function getDecimal(){}if(number<1e4){return number}};NumberUtility.formatBytes=function(bytes){var units=["B","KB","MB","GB","TB"],i=0;for(i=0;bytes>=1024&&i<4;i++){bytes/=1024}return bytes.toFixed(2)+units[i]};NumberUtility.formatTimecode=function(time,format){if(!format){format=time>=60*60*60?"hh:mm:ss":"mm:ss";if(time===0){return"00:00"}}var time_format=format,formatted_time=[],parts=time_format?time_format.split(":"):null,hours,minutes,seconds,i;for(i=0;i<parts.length;i++){switch(parts[i]){case"h":hours=Math.floor(time/60/60);formatted_time.push(hours);break;case"hh":hours=Math.floor(time/60/60);if(hours<10){hours="0"+hours}formatted_time.push(hours);break;case"m":minutes=hours?Math.floor(time/60%60):Math.floor(time/60);formatted_time.push(minutes);break;case"mm":minutes=hours?Math.floor(time/60%60):Math.floor(time/60);if(minutes<10){minutes="0"+minutes}formatted_time.push(minutes);break;case"ss":seconds=Math.floor(time%60);if(seconds<10){seconds="0"+seconds}formatted_time.push(seconds);break;default:formatted_time.push("");break}}return formatted_time.join(":")};return NumberUtility});